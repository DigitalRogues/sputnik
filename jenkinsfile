node {
  stage("Get Dependencies") {
    // Go version from Go Plugin
    def root = tool name: 'Go 1.9.2', type: 'go'
    withEnv(["GOROOT=${root}", "PATH+GO=${root}/bin"]) {
      sh 'go get'
    }
  }
  stage("Test") {
    // Go version from Go Plugin
    def root = tool name: 'Go 1.9.2', type: 'go'
    withEnv(["GOROOT=${root}", "PATH+GO=${root}/bin"]) {
      sh 'go test ./... -v'
    }
  }
}
